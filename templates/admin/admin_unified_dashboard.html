{% extends 'admin/base_admin.html' %}

{% block title %}Admin Dashboard - Portfolio Pro{% endblock %}
{% block header %}Dashboard{% endblock %}

{% block admin_content %}
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <div class="bg-white rounded-lg shadow p-6">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm font-medium text-gray-500">Total Projects</p>
                <p class="text-3xl font-bold text-indigo-600">{{ total_projects }}</p>
            </div>
            <div class="w-12 h-12 rounded-full bg-indigo-100 flex items-center justify-center">
                <i class="fas fa-folder text-indigo-600 text-xl"></i>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow p-6">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm font-medium text-gray-500">Work Experience</p>
                <p class="text-3xl font-bold text-green-600">{{ total_experiences }}</p>
            </div>
            <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center">
                <i class="fas fa-briefcase text-green-600 text-xl"></i>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow p-6">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm font-medium text-gray-500">Skills</p>
                <p class="text-3xl font-bold text-purple-600">{{ total_skills }}</p>
            </div>
            <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center">
                <i class="fas fa-code text-purple-600 text-xl"></i>
            </div>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow p-6">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-sm font-medium text-gray-500">Messages</p>
                <p class="text-3xl font-bold text-orange-600">{{ total_messages }}</p>
            </div>
            <div class="w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center">
                <i class="fas fa-envelope text-orange-600 text-xl"></i>
            </div>
        </div>
    </div>
</div>

<div class="mb-6 border-b border-gray-200">
    <nav class="-mb-px flex space-x-8" aria-label="Tabs">
        <button onclick="switchTab('projects')" id="tab-projects" class="tab-btn border-indigo-500 text-indigo-600 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
            <i class="fas fa-folder mr-2"></i>Projects
        </button>
        <button onclick="switchTab('experience')" id="tab-experience" class="tab-btn border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
            <i class="fas fa-briefcase mr-2"></i>Work Experience
        </button>
        <button onclick="switchTab('skills')" id="tab-skills" class="tab-btn border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
            <i class="fas fa-code mr-2"></i>Skills
        </button>
        <button onclick="switchTab('messages')" id="tab-messages" class="tab-btn border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
            <i class="fas fa-envelope mr-2"></i>Messages
        </button>
    </nav>
</div>

<div id="content-projects" class="tab-content">
    <div class="flex items-center justify-between mb-6">
        <h2 class="text-xl font-semibold text-white">Projects Management</h2>
        <button onclick="openModal('project-modal')" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2">
            <i class="fas fa-plus"></i>Add Project
        </button>
    </div>

    <div class="bg-white rounded-lg shadow overflow-hidden">
        {% if projects %}
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="text-left py-3 px-4 font-medium text-gray-500">Title</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-500">Category</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-500">Technologies</th>
                            <th class="text-center py-3 px-4 font-medium text-gray-500">Featured</th>
                            <th class="text-center py-3 px-4 font-medium text-gray-500">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for project in projects %}
                            <tr class="border-b hover:bg-gray-50">
                                <td class="py-3 px-4">
                                    <div class="flex items-center gap-3">
                                        {% if project.image %}
                                            <img src="{{ project.image.url }}" alt="{{ project.title }}" class="w-10 h-10 rounded object-cover">
                                        {% else %}
                                            <div class="w-10 h-10 rounded bg-gray-200 flex items-center justify-center">
                                                <i class="fas fa-folder text-gray-400"></i>
                                            </div>
                                        {% endif %}
                                        <span class="font-medium">{{ project.title }}</span>
                                    </div>
                                </td>
                                <td class="py-3 px-4">
                                    <span class="px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded">
                                        {{ project.category|default:"None" }}
                                    </span>
                                </td>
                                <td class="py-3 px-4 text-sm text-gray-600">
                                    {{ project.technologies|truncatechars:30 }}
                                </td>
                                <td class="py-3 px-4 text-center">
                                    {% if project.featured %}
                                        <span class="px-2 py-1 text-xs bg-yellow-100 text-yellow-700 rounded">
                                            <i class="fas fa-star mr-1"></i>Featured
                                        </span>
                                    {% else %}
                                        <span class="text-gray-400">-</span>
                                    {% endif %}
                                </td>
                                <td class="py-3 px-4 text-center">
                                    <div class="flex items-center justify-center gap-2">
                                        <button onclick="editProject({{ project.pk }}, '{{ project.title|escapejs }}', '{{ project.slug|escapejs }}', '{{ project.description|escapejs|truncatechars:100 }}', '{{ project.category|escapejs }}', '{{ project.technologies|escapejs }}', {{ project.featured|yesno:"true,false" }}, {{ project.order }})" 
                                                class="p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <a href="{% url 'accounts:admin_project_delete' project.pk %}" 
                                        class="p-2 text-red-600 hover:bg-red-50 rounded transition-colors" title="Delete">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div class="p-8 text-center">
                <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center">
                    <i class="fas fa-folder text-gray-400 text-2xl"></i>
                </div>
                <h3 class="text-lg font-medium text-gray-900 mb-2">No projects yet</h3>
                <button onclick="openModal('project-modal')" class="inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700">
                    <i class="fas fa-plus"></i>Add Project
                </button>
            </div>
        {% endif %}
    </div>
</div>

<div id="content-experience" class="tab-content hidden">
    <div class="flex items-center justify-between mb-6">
        <h2 class="text-xl font-semibold text-white">Work Experience Management</h2>
        <button onclick="openModal('experience-modal')" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2">
            <i class="fas fa-plus"></i>Add Experience
        </button>
    </div>

    <div class="bg-white rounded-lg shadow overflow-hidden">
        {% if experiences %}
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="text-left py-3 px-4 font-medium text-gray-500">Company</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-500">Position</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-500">Duration</th>
                            <th class="text-center py-3 px-4 font-medium text-gray-500">Current</th>
                            <th class="text-center py-3 px-4 font-medium text-gray-500">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for experience in experiences %}
                            <tr class="border-b hover:bg-gray-50">
                                <td class="py-3 px-4">
                                    <div class="flex items-center gap-3">
                                        {% if experience.company_logo %}
                                            <img src="{{ experience.company_logo.url }}" alt="{{ experience.company }}" class="w-10 h-10 rounded object-cover">
                                        {% else %}
                                            <div class="w-10 h-10 rounded bg-gray-200 flex items-center justify-center">
                                                <i class="fas fa-building text-gray-400"></i>
                                            </div>
                                        {% endif %}
                                        <span class="font-medium">{{ experience.company }}</span>
                                    </div>
                                </td>
                                <td class="py-3 px-4">{{ experience.position }}</td>
                                <td class="py-3 px-4 text-sm text-gray-600">
                                    {{ experience.start_date|date:"M Y" }} - 
                                    {% if experience.is_current %}Present{% else %}{{ experience.end_date|date:"M Y" }}{% endif %}
                                </td>
                                <td class="py-3 px-4 text-center">
                                    {% if experience.is_current %}
                                        <span class="px-2 py-1 text-xs bg-green-100 text-green-700 rounded">Current</span>
                                    {% else %}
                                        <span class="text-gray-400">-</span>
                                    {% endif %}
                                </td>
                                <td class="py-3 px-4 text-center">
                                    <div class="flex items-center justify-center gap-2">
                                        <button onclick="editExperience({{ experience.pk }}, '{{ experience.company|escapejs }}', '{{ experience.position|escapejs }}', '{{ experience.location|escapejs }}', '{{ experience.description|escapejs|truncatechars:100 }}', '{{ experience.technologies|escapejs }}', {{ experience.is_current|yesno:"true,false" }}, {{ experience.is_visible|yesno:"true,false" }}, {{ experience.order }})" 
                                                class="p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <a href="{% url 'accounts:admin_experience_delete' experience.pk %}" 
                                        class="p-2 text-red-600 hover:bg-red-50 rounded transition-colors" title="Delete">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div class="p-8 text-center">
                <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center">
                    <i class="fas fa-briefcase text-gray-400 text-2xl"></i>
                </div>
                <h3 class="text-lg font-medium text-gray-900 mb-2">No work experience yet</h3>
                <button onclick="openModal('experience-modal')" class="inline-flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                    <i class="fas fa-plus"></i>Add Experience
                </button>
            </div>
        {% endif %}
    </div>
</div>

<div id="content-skills" class="tab-content hidden">
    <div class="flex items-center justify-between mb-6">
        <h2 class="text-xl font-semibold text-white">Skills Management</h2>
        <button onclick="openModal('skill-modal')" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2">
            <i class="fas fa-plus"></i>Add Skill
        </button>
    </div>

    <div class="bg-white rounded-lg shadow overflow-hidden">
        {% if skills %}
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="text-left py-3 px-4 font-medium text-gray-500">Name</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-500">Category</th>
                            <th class="text-center py-3 px-4 font-medium text-gray-500">Proficiency</th>
                            <th class="text-center py-3 px-4 font-medium text-gray-500">Visible</th>
                            <th class="text-center py-3 px-4 font-medium text-gray-500">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for skill in skills %}
                            <tr class="border-b hover:bg-gray-50">
                                <td class="py-3 px-4 font-medium">{{ skill.name }}</td>
                                <td class="py-3 px-4">
                                    <span class="px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded">
                                        {{ skill.get_category_display }}
                                    </span>
                                </td>
                                <td class="py-3 px-4">
                                    <div class="flex items-center justify-center gap-2">
                                        <div class="w-16 h-2 bg-gray-200 rounded-full">
                                            <div class="h-full bg-purple-600 rounded-full" style="width: {{ skill.proficiency_level }}%"></div>
                                        </div>
                                        <span class="text-xs text-gray-500">{{ skill.proficiency_level }}%</span>
                                    </div>
                                </td>
                                <td class="py-3 px-4 text-center">
                                    {% if skill.is_visible %}
                                        <span class="px-2 py-1 text-xs bg-green-100 text-green-700 rounded">Visible</span>
                                    {% else %}
                                        <span class="px-2 py-1 text-xs bg-gray-100 text-gray-500 rounded">Hidden</span>
                                    {% endif %}
                                </td>
                                <td class="py-3 px-4 text-center">
                                    <div class="flex items-center justify-center gap-2">
                                        <button onclick="editSkill({{ skill.pk }}, '{{ skill.name|escapejs }}', '{{ skill.category|escapejs }}', {{ skill.proficiency_level }}, {{ skill.is_visible|yesno:"true,false" }}, {{ skill.order }})" 
                                                class="p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <a href="{% url 'accounts:admin_skill_delete' skill.pk %}" 
                                        class="p-2 text-red-600 hover:bg-red-50 rounded transition-colors" title="Delete">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div class="p-8 text-center">
                <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center">
                    <i class="fas fa-code text-gray-400 text-2xl"></i>
                </div>
                <h3 class="text-lg font-medium text-gray-900 mb-2">No skills yet</h3>
                <button onclick="openModal('skill-modal')" class="inline-flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700">
                    <i class="fas fa-plus"></i>Add Skill
                </button>
            </div>
        {% endif %}
    </div>
</div>

<div id="content-messages" class="tab-content hidden">
    <div class="flex items-center justify-between mb-6">
        <h2 class="text-xl font-semibold text-white">Messages</h2>
        <a href="/admin/contact_app/contactmessage/" class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors flex items-center gap-2">
            <i class="fas fa-external-link-alt"></i>View in Admin
        </a>
    </div>

    <div class="bg-white rounded-lg shadow overflow-hidden">
        {% if messages %}
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="text-left py-3 px-4 font-medium text-gray-500">Name</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-500">Email</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-500">Subject</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-500">Message</th>
                            <th class="text-left py-3 px-4 font-medium text-gray-500">Date</th>
                            <th class="text-center py-3 px-4 font-medium text-gray-500">Status</th>
                            <th class="text-center py-3 px-4 font-medium text-gray-500">Actions</th>
                        </thead>
                    <tr>
                    </tbody>
                        {% for message in messages %}
                            <tr class="border-b hover:bg-gray-50">
                                <td class="py-3 px-4 font-medium">{{ message.name }}</td>
                                <td class="py-3 px-4 text-sm text-gray-600">{{ message.email }}</td>
                                <td class="py-3 px-4">{{ message.subject }}</td>
                                <td class="py-3 px-4 text-sm text-gray-600">{{ message.message|truncatechars:50 }}</td>
                                <td class="py-3 px-4 text-sm text-gray-500">{{ message.created_at|date:"M d, Y" }}</td>
                                <td class="py-3 px-4 text-center">
                                    {% if message.is_read %}
                                        <span class="px-2 py-1 text-xs bg-green-100 text-green-700 rounded">Read</span>
                                    {% else %}
                                        <span class="px-2 py-1 text-xs bg-red-100 text-red-700 rounded">Unread</span>
                                    {% endif %}
                                </td>
                                <td class="py-3 px-4 text-center">
                                    <div class="flex items-center justify-center gap-2">
                                        {% if message.is_read %}
                                            <form method="post" action="{% url 'accounts:admin_message_mark_unread' message.pk %}" style="display: inline;">
                                                {% csrf_token %}
                                                <button type="submit" class="p-2 text-yellow-600 hover:bg-yellow-50 rounded transition-colors" title="Mark as Unread">
                                                    <i class="fas fa-envelope-open"></i>
                                                </button>
                                            </form>
                                        {% else %}
                                            <form method="post" action="{% url 'accounts:admin_message_mark_read' message.pk %}" style="display: inline;">
                                                {% csrf_token %}
                                                <button type="submit" class="p-2 text-green-600 hover:bg-green-50 rounded transition-colors" title="Mark as Read">
                                                    <i class="fas fa-check"></i>
                                                </button>
                                            </form>
                                        {% endif %}
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div class="p-8 text-center">
                <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center">
                    <i class="fas fa-envelope text-gray-400 text-2xl"></i>
                </div>
                <h3 class="text-lg font-medium text-gray-900 mb-2">No messages yet</h3>
            </div>
        {% endif %}
    </div>
</div>

<div id="project-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden overflow-y-auto h-full w-full z-50">
    <div class="relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white">
        <div class="flex items-center justify-between mb-4">
            <h3 class="text-xl font-semibold" id="project-modal-title">Add New Project</h3>
            <button onclick="closeModal('project-modal')" class="text-gray-400 hover:text-gray-600">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
        <form id="project-form" method="post" action="{% url 'accounts:admin_project_add' %}" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" id="project-id" name="project_id">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                    <input type="text" id="project-title" name="title" required class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Slug</label>
                    <input type="text" id="project-slug" name="slug" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                    <input type="text" id="project-category" name="category" placeholder="e.g., Web, Mobile" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Technologies</label>
                    <input type="text" id="project-technologies" name="technologies" placeholder="Python, Django, React" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                    <textarea id="project-description" name="description" rows="3" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
                </div>
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Detailed Description</label>
                    <textarea id="project-detailed_description" name="detailed_description" rows="4" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Image</label>
                    <input type="file" id="project-image" name="image" accept="image/*" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Order</label>
                    <input type="number" id="project-order" name="order" value="0" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">GitHub Link</label>
                    <input type="url" id="project-github_link" name="github_link" placeholder="https://github.com/..." class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Live Link</label>
                    <input type="url" id="project-live_link" name="live_link" placeholder="https://..." class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div class="flex items-center gap-6">
                    <label class="flex items-center">
                        <input type="checkbox" id="project-featured" name="featured" class="w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500">
                        <span class="ml-2 text-sm text-gray-700">Featured</span>
                    </label>
                </div>
            </div>
            <div class="flex justify-end gap-3 mt-6">
                <button type="button" onclick="closeModal('project-modal')" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400">Cancel</button>
                <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">Save Project</button>
            </div>
        </form>
    </div>
</div>

<div id="experience-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden overflow-y-auto h-full w-full z-50">
    <div class="relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white">
        <div class="flex items-center justify-between mb-4">
            <h3 class="text-xl font-semibold" id="experience-modal-title">Add Work Experience</h3>
            <button onclick="closeModal('experience-modal')" class="text-gray-400 hover:text-gray-600">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
        <form id="experience-form" method="post" action="{% url 'accounts:admin_experience_add' %}" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" id="experience-id" name="experience_id">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Company</label>
                    <input type="text" id="experience-company" name="company" required class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Position</label>
                    <input type="text" id="experience-position" name="position" required class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
                    <input type="text" id="experience-location" name="location" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Technologies</label>
                    <input type="text" id="experience-technologies" name="technologies" placeholder="Python, Django, SQL" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Start Date</label>
                    <input type="date" id="experience-start_date" name="start_date" required class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">End Date</label>
                    <input type="date" id="experience-end_date" name="end_date" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                </div>
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                    <textarea id="experience-description" name="description" rows="4" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Company Logo</label>
                    <input type="file" id="experience-company_logo" name="company_logo" accept="image/*" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Order</label>
                    <input type="number" id="experience-order" name="order" value="0" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                </div>
                <div class="flex items-center gap-6">
                    <label class="flex items-center">
                        <input type="checkbox" id="experience-is_current" name="is_current" class="w-4 h-4 text-green-600 rounded focus:ring-green-500">
                        <span class="ml-2 text-sm text-gray-700">Currently Working</span>
                    </label>
                </div>
                <div class="flex items-center gap-6">
                    <label class="flex items-center">
                        <input type="checkbox" id="experience-is_visible" name="is_visible" checked class="w-4 h-4 text-green-600 rounded focus:ring-green-500">
                        <span class="ml-2 text-sm text-gray-700">Visible</span>
                    </label>
                </div>
            </div>
            <div class="flex justify-end gap-3 mt-6">
                <button type="button" onclick="closeModal('experience-modal')" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400">Cancel</button>
                <button type="submit" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">Save Experience</button>
            </div>
        </form>
    </div>
</div>

<div id="skill-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden overflow-y-auto h-full w-full z-50">
    <div class="relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white">
        <div class="flex items-center justify-between mb-4">
            <h3 class="text-xl font-semibold" id="skill-modal-title">Add New Skill</h3>
            <button onclick="closeModal('skill-modal')" class="text-gray-400 hover:text-gray-600">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
        <form id="skill-form" method="post" action="{% url 'accounts:admin_skill_add' %}">
            {% csrf_token %}
            <input type="hidden" id="skill-id" name="skill_id">
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Skill Name</label>
                    <input type="text" id="skill-name" name="name" required class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                    <select id="skill-category" name="category" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                        <option value="programming">Programming Languages</option>
                        <option value="framework">Frameworks</option>
                        <option value="database">Databases</option>
                        <option value="tool">Tools & Platforms</option>
                        <option value="soft">Soft Skills</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Proficiency Level (0-100)</label>
                    <input type="number" id="skill-proficiency_level" name="proficiency_level" min="0" max="100" value="50" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Order</label>
                    <input type="number" id="skill-order" name="order" value="0" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
                <div class="flex items-center gap-6">
                    <label class="flex items-center">
                        <input type="checkbox" id="skill-is_visible" name="is_visible" checked class="w-4 h-4 text-purple-600 rounded focus:ring-purple-500">
                        <span class="ml-2 text-sm text-gray-700">Visible</span>
                    </label>
                </div>
            </div>
            <div class="flex justify-end gap-3 mt-6">
                <button type="button" onclick="closeModal('skill-modal')" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400">Cancel</button>
                <button type="submit" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">Save Skill</button>
            </div>
        </form>
    </div>
</div>

<script>
    function switchTab(tabName) {
        document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.add('hidden');
        });
        
        document.querySelectorAll('.tab-btn').forEach(tab => {
            tab.classList.remove('border-indigo-500', 'text-indigo-600');
            tab.classList.add('border-transparent', 'text-gray-500');
        });
        
        document.getElementById('content-' + tabName).classList.remove('hidden');
        
        const activeTab = document.getElementById('tab-' + tabName);
        activeTab.classList.remove('border-transparent', 'text-gray-500');
        activeTab.classList.add('border-indigo-500', 'text-indigo-600');
        
        localStorage.setItem('adminActiveTab', tabName);
    }

    function openModal(modalId) {
        document.getElementById(modalId).classList.remove('hidden');
    }

    function closeModal(modalId) {
        document.getElementById(modalId).classList.add('hidden');
        if (modalId === 'project-modal') {
            document.getElementById('project-form').reset();
            document.getElementById('project-id').value = '';
            document.getElementById('project-modal-title').textContent = 'Add New Project';
            document.getElementById('project-form').action = "{% url 'accounts:admin_project_add' %}";
        } else if (modalId === 'experience-modal') {
            document.getElementById('experience-form').reset();
            document.getElementById('experience-id').value = '';
            document.getElementById('experience-modal-title').textContent = 'Add Work Experience';
            document.getElementById('experience-form').action = "{% url 'accounts:admin_experience_add' %}";
        } else if (modalId === 'skill-modal') {
            document.getElementById('skill-form').reset();
            document.getElementById('skill-id').value = '';
            document.getElementById('skill-modal-title').textContent = 'Add New Skill';
            document.getElementById('skill-form').action = "{% url 'accounts:admin_skill_add' %}";
        }
    }

    function editProject(pk, title, slug, description, category, technologies, featured, order) {
        document.getElementById('project-id').value = pk;
        document.getElementById('project-title').value = title;
        document.getElementById('project-slug').value = slug;
        document.getElementById('project-description').value = description || '';
        document.getElementById('project-category').value = category || '';
        document.getElementById('project-technologies').value = technologies || '';
        document.getElementById('project-order').value = order || 0;
        document.getElementById('project-featured').checked = featured;
        
        document.getElementById('project-modal-title').textContent = 'Edit Project';
        document.getElementById('project-form').action = '/admin-panel/projects/' + pk + '/edit/';
        openModal('project-modal');
    }

    function editExperience(pk, company, position, location, description, technologies, isCurrent, isVisible, order) {
        document.getElementById('experience-id').value = pk;
        document.getElementById('experience-company').value = company;
        document.getElementById('experience-position').value = position;
        document.getElementById('experience-location').value = location || '';
        document.getElementById('experience-description').value = description || '';
        document.getElementById('experience-technologies').value = technologies || '';
        document.getElementById('experience-order').value = order || 0;
        document.getElementById('experience-is_current').checked = isCurrent;
        document.getElementById('experience-is_visible').checked = isVisible;
        
        document.getElementById('experience-modal-title').textContent = 'Edit Work Experience';
        document.getElementById('experience-form').action = '/admin-panel/experience/' + pk + '/edit/';
        openModal('experience-modal');
    }

    function editSkill(pk, name, category, proficiency, isVisible, order) {
        document.getElementById('skill-id').value = pk;
        document.getElementById('skill-name').value = name;
        document.getElementById('skill-category').value = category || 'programming';
        document.getElementById('skill-proficiency_level').value = proficiency || 50;
        document.getElementById('skill-order').value = order || 0;
        document.getElementById('skill-is_visible').checked = isVisible;
        
        document.getElementById('skill-modal-title').textContent = 'Edit Skill';
        document.getElementById('skill-form').action = '/admin-panel/skills/' + pk + '/edit/';
        openModal('skill-modal');
    }

    document.getElementById('experience-is_current')?.addEventListener('change', function() {
        const endDateInput = document.getElementById('experience-end_date');
        if (this.checked) {
            endDateInput.value = '';
            endDateInput.disabled = true;
        } else {
            endDateInput.disabled = false;
        }
    });

    window.onclick = function(event) {
        if (event.target.classList.contains('fixed') && event.target.classList.contains('inset-0')) {
            event.target.classList.add('hidden');
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        const savedTab = localStorage.getItem('adminActiveTab') || 'projects';
        switchTab(savedTab);
    });
</script>

<style>
    .tab-btn {
        transition: all 0.2s;
    }
    .tab-btn:hover {
        border-color: #9ca3af;
    }
</style>
{% endblock %}